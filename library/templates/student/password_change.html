{% extends 'student/base.html' %}
{% block title %}Sécurité - Changement de mot de passe{% endblock %}

{% block content %}
<header class="content-header">
  <h2 class="page-title">Paramètres de sécurité</h2>
  <p class="page-subtitle">Modifiez votre mot de passe pour garantir la confidentialité de votre compte UniBooks.</p>
</header>

<section class="security-section">
  <div class="form-container-boxed narrow">
    <div class="security-notice-box">
      <h4 class="notice-title">Exigences de sécurité</h4>
      <ul class="security-rules">
        <li>Utilisez au moins 8 caractères</li>
        <li>Incluez des chiffres et des symboles</li>
        <li>Évitez d'utiliser votre matricule comme mot de passe</li>
      </ul>
    </div>

    <form method="post" class="ub-form-security">
      {% csrf_token %}

      {% if form.non_field_errors %}
        <div class="message error-banner" role="alert">
          {% for error in form.non_field_errors %}
            <p>{{ error }}</p>
          {% endfor %}
        </div>
      {% endif %}

      <div class="form-body">
        {% for field in form %}
          <div class="form-field-group {% if field.errors %}has-field-error{% endif %}">
            <div class="label-row">
              <label for="{{ field.id_for_label }}">{{ field.label }}</label>
            </div>
            
            <div class="input-wrapper-iconic">
              {{ field }}
              </div>

            {% if field.help_text %}
              <p class="field-help">{{ field.help_text }}</p>
            {% endif %}

            {% if field.errors %}
              <ul class="field-errors-list">
                {% for error in field.errors %}
                  <li>{{ error }}</li>
                {% endfor %}
              </ul>
            {% endif %}
          </div>
        {% endfor %}
      </div>

      <div class="form-actions-bar">
        <button type="submit" class="ub-btn ub-btn--primary btn-action">
          Mettre à jour le mot de passe
        </button>
        <a href="{% url 'student:profile' %}" class="ub-btn ub-btn--ghost">
          Annuler et revenir au profil
        </a>
      </div>
    </form>
  </div>
</section>

<footer class="security-footer-info">
  <p>
    <small>
      <strong>Besoin d'aide ?</strong> Si vous avez oublié votre mot de passe actuel, 
      veuillez vous présenter au guichet de la bibliothèque avec votre carte d'étudiant.
    </small>
  </p>
</footer>
{% endblock %}