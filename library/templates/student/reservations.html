{% extends 'student/base.html' %}
{% block title %}Mes réservations{% endblock %}

{% block content %}
<header class="content-header">
  <h1 class="page-title">Mes réservations</h1>
  <p class="page-subtitle">Gérez vos demandes d'ouvrages actuellement indisponibles.</p>
</header>

<section class="borrows-section">
  <div class="borrows-list-container">
    {% for r in reservations %}
      <article class="borrow-card reservation-card">
        <div class="borrow-main-info">
          <div class="borrow-details">
            <h3 class="borrow-book-title">
              <a href="{% url 'student:book_detail' r.book.pk %}">{{ r.book.title }}</a>
            </h3>
            
            <div class="borrow-meta">
              <span class="status-badge status-{{ r.status|lower }}">
                {{ r.get_status_display }}
              </span>
              
              <span class="date-info">
                <span class="label">Demandée le :</span>
                <time datetime="{{ r.reserved_at|date:'Y-m-d' }}">{{ r.reserved_at|date:"d M Y" }}</time>
              </span>
            </div>
          </div>

          <div class="borrow-deadline">
            <div class="deadline-box">
              <span class="deadline-label">Disponibilité estimée</span>
              <span class="deadline-date">
                {% if r.status == 'ready' %}
                  <strong class="text-success">Disponible au guichet</strong>
                {% else %}
                  En attente de retour
                {% endif %}
              </span>
            </div>
          </div>
        </div>

        <footer class="borrow-actions">
          <a href="{% url 'student:book_detail' r.book.pk %}" class="ub-btn ub-btn--ghost btn-link-action">
            Consulter la fiche ouvrage
          </a>
        </footer>
      </article>
    {% empty %}
      <div class="empty-state-container">
        <div class="empty-illustration"></div>
        <p class="empty-text">Vous n'avez aucune réservation en cours.</p>
        <a href="{% url 'student:book_list' %}" class="ub-btn ub-btn--primary">Parcourir le catalogue</a>
      </div>
    {% endfor %}
  </div>
</section>

<aside class="info-footer-box">
  <p><small><strong>Rappel :</strong> Vous recevrez une notification dès que l'un de vos ouvrages réservés sera prêt à être récupéré au guichet central.</small></p>
</aside>
{% endblock %}